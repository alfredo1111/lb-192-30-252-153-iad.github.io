var Microsoft;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t,e,n,o,r,i){this.instance=t,this.clientId=e,this.tenant=n,this.redirectUri=o,this.postLogoutRedirectUri=r,this.cacheLocation=i}return t}();t.AuthConfigImpl=e}(e=t.Application||(t.Application={}))}(e=t.DataStudio||(t.DataStudio={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(t){var e;!function(t){var e;!function(t){!function(t){t[t.DOGFOOD=0]="DOGFOOD",t[t.CATFOOD=1]="CATFOOD",t[t.PRODUCTION=2]="PRODUCTION"}(t.EnvironmentTypeImpl||(t.EnvironmentTypeImpl={}));var e=t.EnvironmentTypeImpl,n=function(){function t(){}return t.Current=null,t.CurrentEndpoint=null,t.getAPIUrl=function(n,o){return null===t.CurrentEndpoint&&(t.CurrentEndpoint=o?t.getConstant("https://AtlasPlatformAPI.cloudapp.net",(r={},r[e.DOGFOOD]="https://AtlasPlatformAPIInt.cloudapp.net",r[e.CATFOOD]="https://AtlasPlatformAPITest.cloudapp.net",r)):""),t.CurrentEndpoint+"/api/"+n;var r},t.getConstant=function(e,n){return n[t.getCurrent()]||e},t.getCurrent=function(){return null===t.Current&&(t.Current=e[MICROSOFT_DATASTUDIO_CURRENT_ENVIRONMENT],"undefined"==typeof t.Current&&(t.Current=e.PRODUCTION)),t.Current},t}();t.EnvironmentImpl=n}(e=t.Application||(t.Application={}))}(e=t.DataStudio||(t.DataStudio={}))}(Microsoft||(Microsoft={})),Microsoft.DataStudio.Application.Environment=Microsoft.DataStudio.Application.EnvironmentImpl,Microsoft.DataStudio.Application.EnvironmentType=Microsoft.DataStudio.Application.EnvironmentTypeImpl;var Microsoft;!function(t){var e;!function(e){var n;!function(e){var n=t.DataStudio.Diagnostics.Logging,o=function(){function t(){}return t.getLogger=function(e){return t.loggerFactory.getLogger(e)},t.loggerFactory=new n.LoggerFactory({moduleName:"Application"}),t}();e.LoggerFactory=o}(n=e.Application||(e.Application={}))}(e=t.DataStudio||(t.DataStudio={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(t){var e;!function(e){var n;!function(e){var n=function(){function e(){}return e.AZURE_RESOURCE_URL=t.DataStudio.Application.Environment.getConstant("https://management.azure.com",(n={},n[t.DataStudio.Application.EnvironmentType.DOGFOOD]="https://api-dogfood.resources.windows-int.net/",n)),e;var n}();e.ResourceConstantsImpl=n;var o=function(){function e(){}return e.AUTH_INSTANCE_URL=t.DataStudio.Application.Environment.getConstant("https://login.windows.net/",(n={},n[t.DataStudio.Application.EnvironmentType.DOGFOOD]="https://login.windows-ppe.net/",n)),e.AUTH_CLIENTID="16f9b8e9-d20b-45a1-ab9e-db2e8254508b",e.AUTH_TENANT="common",e.AUTH_SIGNOUT_URL="",e.AUTH_STORAGE_MODE="sessionStorage",e.AUTH_RESOURCE_NAME="https://management.core.windows.net/",e.AUTH_SUCCESS_POSTLOGIN_PAGE="",e.AUTH_FAILURE_POSTLOGIN_PAGE="",e;var n}();e.AuthConstants=o}(n=e.Application||(e.Application={}))}(e=t.DataStudio||(t.DataStudio={}))}(Microsoft||(Microsoft={})),Microsoft.DataStudio.Application.ResourceConstants=Microsoft.DataStudio.Application.ResourceConstantsImpl;var ShellContext=Microsoft.DataStudio.Application.ShellContext,Router=Microsoft.DataStudio.Application.Router,Logging=Microsoft.DataStudio.Diagnostics.Logging,Microsoft;!function(t){var e;!function(e){var n;!function(n){var o=function(){function n(){var t=this;if(this.currentUser=null,this.accessTokenDeferred=Q.defer(),this.noauth=!1,this.getTokenId=0,this.getTokenMap={},this.waitingToRenewToken=!1,this.login=function(){t.noauth||(t.authLogger.logInfo("Login initiated"),t.authContext.login())},this.logout=function(){t.authLogger.logInfo("Logout initiated"),t.authContext.logOut()},n._instance)throw new Error("Error: Instantiation failed: USE [Microsoft.DataStudio.Managers.AuthenticationManager.instance] instead of new.");n._instance=this,this.authLogger=e.Application.LoggerFactory.getLogger({loggerName:"AuthenticationManager"})}return n.prototype.processUserContext=function(){var t=this;if(!t.currentUser){t.isAuthRelatedCallback=t.authContext.isCallback(window.location.hash),t.isAuthRelatedCallback&&t.authContext.handleWindowCallback();var n=t.authContext.getLoginError();if(n)this.authLogger.logError("Login Error",{error:n});else{var o=t.authContext.getCachedUser();null!==o&&(t.currentUser={email:o.userName,name:o.profile.given_name,puid:e.AuthHelpers.extractPuid(t.authContext._getItem(t.authContext.CONSTANTS.STORAGE.IDTOKEN)),token:null,sessionId:t.authContext._getItem(t.authContext.CONSTANTS.STORAGE.STATE_LOGIN),subscriptions:null})}}},Object.defineProperty(n,"instance",{get:function(){return n._instance},enumerable:!0,configurable:!0}),n.prototype.initializeAsync=function(e){var o=this;if(-1!=window.location.href.indexOf("noauth=true")){if(this.noauth=!0,this.fakeSessionID=this.generateGUID(),localStorage[n.injectedAccessToken]="",parent!==window){this.parentOrigin=document.referrer.substring(0,document.referrer.indexOf("/",8));var r=function(t){var e=t.data;if("getToken"===e.type){var n=e.id,r=e.token;o.getTokenMap[n](r),delete o.getTokenMap[n]}};window.addEventListener("message",r,!1)}return Q(!0)}var i=this,a=Q.defer();i.defaultTenant=e;var s=window.location.toString(),u=new t.DataStudio.Application.AuthConfigImpl(t.DataStudio.Application.AuthConstants.AUTH_INSTANCE_URL,t.DataStudio.Application.AuthConstants.AUTH_CLIENTID,t.DataStudio.Application.AuthConstants.AUTH_TENANT,s,s,t.DataStudio.Application.AuthConstants.AUTH_STORAGE_MODE);i.authContext=new AuthenticationContext(u);var c=i.getCurrentUser();return c?i.isAuthRelatedCallback||window.location.href===n.accessTokenRedirectUrl?(a.reject(!0),a.promise):e?Q(!0):i.getUserSubscriptions():(localStorage.removeItem(n.tenantsListStorageKey),localStorage.removeItem(n.subscriptionsDictionaryStorageKey),i.login(),a.reject(!0),a.promise)},n.prototype.getCurrentUser=function(){return this.noauth?{email:"dummy@microsoft.com",name:"TestApp",puid:"23234123123",sessionId:this.fakeSessionID||"sessionGuidDummyString",subscriptions:[],token:null}:(this.processUserContext(),this.currentUser)},n.prototype.getAccessToken=function(t){var e=this;if(this.noauth){var o=Q.defer();if(null!=this.parentOrigin){var r=++this.getTokenId;this.getTokenMap[r]=function(t){o.resolve(t)},parent.postMessage({type:"getToken",id:r},this.parentOrigin)}else{var i=function(){var t=localStorage[n.injectedAccessToken];t&&(o.resolve(t),clearInterval(a))},a=setInterval(i,1e3);i()}return o.promise}var s=this;return t&&(t=t.toLowerCase()),s.accessTokenDeferred.promise.isFulfilled()&&(s.accessTokenDeferred=Q.defer()),s.defaultTenant?s.updateAccessTokenForTenant(s.defaultTenant):s.subscriptionToTenantMapDeferred.promise.then(function(n){var o=n[t]&&n[t].tenantId?n[t].tenantId:null;if(t&&!o){var r="No AD tenant is available for the subscription "+t+". If you recently acquired permissions for this subscription, then please logout and login again.";e.authLogger.logError("Tenant missing for Subscription",{errorDetails:r}),s.accessTokenDeferred.reject(r)}else t?s.updateAccessTokenForTenant(o):s.updateAccessTokenForTenant(null)}),s.accessTokenDeferred.promise},n.prototype.updateAccessTokenForTenant=function(e){var o=this,r=this;r.authContext.config.redirectUri=n.accessTokenRedirectUrl;var i=r.authContext.getCachedToken(t.DataStudio.Application.AuthConstants.AUTH_RESOURCE_NAME),a=i?jwt.decode(i).tid:r.authContext.config.tenant;e&&a!==e?(r.waitingToRenewToken=!0,r.authContext.config.tenant=e,r.authContext._renewToken(t.DataStudio.Application.AuthConstants.AUTH_RESOURCE_NAME,function(t,e){t?(o.authLogger.logError("Renew Token Failed:",{errorDetails:t}),r.accessTokenDeferred.reject(t)):r.accessTokenDeferred.resolve(e),r.waitingToRenewToken=!1})):r.waitingToRenewToken||r.authContext.acquireToken(t.DataStudio.Application.AuthConstants.AUTH_RESOURCE_NAME,function(t,e){t?(o.authLogger.logError("Aquire Token Failed:",{errorDetails:t}),r.accessTokenDeferred.reject(t)):r.accessTokenDeferred.resolve(e)})},n.prototype.getAccessTokenADC=function(t){var e=this,n=this;return n.accessTokenDeferred.promise.isFulfilled()&&(n.accessTokenDeferred=Q.defer()),n.subscriptionToTenantMapDeferred.promise.then(function(t){n.authContext.acquireToken("https://datacatalog.azure.com",function(t,o){t?(e.authLogger.logError("Aquire Token Failed:",{errorDetails:t}),n.accessTokenDeferred.reject(t)):n.accessTokenDeferred.resolve(o)})}),n.accessTokenDeferred.promise},n.prototype.getUserSubscriptions=function(){var e=this,o=this,r=Q.defer();o.tenantListDeferred=Q.defer(),o.subscriptionToTenantMapDeferred=Q.defer(),o.subscriptionToTenantMapDeferred.promise.then(function(t){o.currentUser.subscriptions=Object.keys(t).map(function(e){return{displayName:t[e].displayName,subscriptionid:e,access_token:null}}),r.resolve(null)});var i=localStorage.getItem(n.tenantsListStorageKey),a=localStorage.getItem(n.subscriptionsDictionaryStorageKey),s=!1;if(i&&a)try{o.tenantListDeferred.resolve(JSON.parse(i)),o.subscriptionToTenantMapDeferred.resolve(JSON.parse(a)),s=!0}catch(u){s=!1,this.authLogger.logError("Tenant Mapping Failed:",{error:u})}return s||o.authContext.acquireToken(t.DataStudio.Application.AuthConstants.AUTH_RESOURCE_NAME,function(t,r){return t?void e.authLogger.logError("Aquire Token Failed:",{errorDetails:t}):void jQuery.ajax({url:n.azureResourceManagerUrl+"/tenants",data:{"api-version":n.azureResourceManagerApiVersion},headers:{Authorization:"Bearer "+r}}).then(function(t){o.tenantListDeferred.resolve(t.value);var e=t.value,r=e.map(function(){return Q.defer()}),i={};e.forEach(function(t,e,n){0===e?o.getSubscriptionsForTenant(t.tenantId,i,r[e]):r[e-1].promise.then(function(){setTimeout(function(){o.getSubscriptionsForTenant(t.tenantId,i,r[e])},500)})}),Q.all(r.map(function(t){return t.promise})).then(function(){o.subscriptionToTenantMapDeferred.resolve(i),localStorage.setItem(n.subscriptionsDictionaryStorageKey,JSON.stringify(i)),localStorage.setItem(n.tenantsListStorageKey,JSON.stringify(e))})},function(t){e.authLogger.logError("Failed to load list of tenants",{errorDetails:t})})}),r.promise},n.prototype.getSubscriptionsForTenant=function(e,o,r){var i=this,a=this;e&&(e=e.toLowerCase()),a.authContext.config.tenant=e,a.authContext._renewToken(t.DataStudio.Application.AuthConstants.AUTH_RESOURCE_NAME,function(t,a){t?i.authLogger.logError("Failed to renew token to get subscription for tenant:",{tenantid:e,errorDetails:t}):jQuery.ajax({url:n.azureResourceManagerUrl+"/subscriptions",data:{"api-version":n.azureResourceManagerApiVersion},headers:{Authorization:"Bearer "+a}}).then(function(t){t.value.forEach(function(t){"Enabled"===t.state&&(o[t.subscriptionId]={tenantId:e,displayName:t.displayName})}),r.resolve(null)},function(t){i.authLogger.logError("Could not get subscriptions for tenant:",{tenant:e}),r.reject(null)})})},n.prototype.generateGUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})},n._instance=new n,n.tenantsListStorageKey="tenantsList",n.subscriptionsDictionaryStorageKey="subscriptionsDictionary",n.azureResourceManagerUrl=t.DataStudio.Application.ResourceConstants.AZURE_RESOURCE_URL,n.azureResourceManagerApiVersion="2015-11-01",n.accessTokenRedirectUrl=window.location.origin+"/accessToken.html",n.injectedAccessToken="injectedAccessToken",n}();n.AuthenticationManager=o}(n=e.Managers||(e.Managers={}))}(e=t.DataStudio||(t.DataStudio={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(t){var e;!function(e){var n;!function(e){function n(t){var e=jwt.decode(t);if(o.isDefined(e.puid)){if(!o.isString(e.puid))return console.warn("Invalid PUID format: puid is present in the idToken, but it doesn't seem to be a string:",e.puid),"";var n=e.puid,r=/^[0-9A-Z]{16}$/;return r.test(n)||console.warn("Invalid PUID format: puid as a string is present in the idToken, but it doesn't match our regex/understanding:",n),n}if(o.isDefined(e.altsecid)){if(!o.isString(e.altsecid))return console.warn("Invalid PUID format: altsecid is present in the idToken, but it doesn't seem to be a string:",e.altsecid),"";var i=e.altsecid,a=/^1:live\.com:[0-9A-Z]{16}$/;if(!a.test(i))return console.warn("Invalid PUID format: altsecid as a string is present in the idToken, but it doesn't match our regex/understanding:",i),i;var s=i.split(":");return s[2]+"@Live.com"}return console.warn("Invalid PUID format: Neither 'puid' nor 'altsecid' seems to be present in the idToken for this user, understand better?:",e),""}var o=t.DataStudio.Diagnostics.TypeInfo;e.extractPuid=n}(n=e.AuthHelpers||(e.AuthHelpers={}))}(e=t.DataStudio||(t.DataStudio={}))}(Microsoft||(Microsoft={}));Gešs0      [Ö÷[Ö÷?¨¿¸[Øå(   {    :https://datafactory-endpoint.azureedge.net/node_modules/@ms-atlas/datastudio/datastudio.application.shared.js?v=1.0.4164.1 necko:classified 1 strongly-framed 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAQAAgAAAAAAAAAAAAAAAAAAAAAB4vFIJp5wRkeyPxAQ9RJGKPqbqVvKO0mKuIl8ec8o/uhmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAOwMIIDrDCCApSgAwIBAgIERTJgTjANBgkqhkiG9w0BAQsFADCBijEUMBIGA1UEBhMLUG9ydFN3aWdnZXIxFDASBgNVBAgTC1BvcnRTd2lnZ2VyMRQwEgYDVQQHEwtQb3J0U3dpZ2dlcjEUMBIGA1UEChMLUG9ydFN3aWdnZXIxFzAVBgNVBAsTDlBvcnRTd2lnZ2VyIENBMRcwFQYDVQQDEw5Qb3J0U3dpZ2dlciBDQTAeFw0xNDEwMjgxMzEyMTBaFw0zODEwMjgxMzEyMTBaMHIxFDASBgNVBAYTC1BvcnRTd2lnZ2VyMRQwEgYDVQQKEwtQb3J0U3dpZ2dlcjEXMBUGA1UECxMOUG9ydFN3aWdnZXIgQ0ExKzApBgNVBAMTImRhdGFmYWN0b3J5LWVuZHBvaW50LmF6dXJlZWRnZS5uZXQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCKn7emKINsnWqPZ+C/VsqbQf/l4NsmIh34bXBR0xdNg9bfb+xcoghRlmbPjhZ/A26A2gJ6Rrg2d0GGMLpbqA8nTlRRGXEAD39321zk4ye09ElXClvqguGqdqOJpPQ05DPFD6wSOq+KVAEblE5bi+LMqBLipDERzgUe7xzeqVVk0i0ldh9yQOIk3YuzcBR9igSEuw5qladmMYvXKHYM9YZz0R7axMc8xAtadK7C9KfFPfEI5LS2nhmy4vBrTgFyYhfkEvKfmIj6HTX0ISFCAC2llcBLpEDcuiW76tAHp1pXDeWtSeaV36AeOctdleVgrbmsGs3fu6ppuRcWjEZUbjE3AgMBAAGjMTAvMC0GA1UdEQQmMCSCImRhdGFmYWN0b3J5LWVuZHBvaW50LmF6dXJlZWRnZS5uZXQwDQYJKoZIhvcNAQELBQADggEBAD5nTga0zudMitI/u0TfDiXUvU9MHWtnM1QsCR52LG8/P3zHlMPdW01WDRZUWTzCGka9MJHNjppqHPNsxY69i49nAksLYLzG7nK57bfwfvJQH/v27QUFGFMmKZNtpz+523V8pi+RJR9/DcmY0SQslyt1+Cj1SViKKOJYr8DiCwrYSUxWRp0XCM6ACnyoVhILHxIff7DQUE7Qq8eLX2UMcsrHHrlmbWpSCkEMtikIahIK4D2jjHj/CFWVzmKApRGZHRCenGUCvwPc6+mdefq6dna4yuo/9sC8unizedWeSL+sIj+Qxy7egEU4w3ZyvM8xUIozSNHY/VVwXW5ypPYqSlDALwEDAAAAAAEBAAAAAA== request-method GET request-Accept-Encoding gzip, deflate, br response-head HTTP/1.1 200 OK
Content-Type: application/javascript
Last-Modified: Sat, 06 Oct 2018 23:13:00 GMT
Accept-Ranges: bytes
Etag: "b370e20ca5dd41:0"
Server: Microsoft-IIS/8.5
X-Frame-Options: AllowAll
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Strict-Transport-Security: max-age=15724800; includeSubDomains
Access-Control-Allow-Origin: *
Vary: Accept-Encoding
Content-Length: 12561
Date: Sun, 28 Oct 2018 18:49:56 GMT
 original-response-headers Content-Type: application/javascript
Last-Modified: Sat, 06 Oct 2018 23:13:00 GMT
Accept-Ranges: bytes
Etag: "b370e20ca5dd41:0"
Server: Microsoft-IIS/8.5
X-Frame-Options: AllowAll
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Strict-Transport-Security: max-age=15724800; includeSubDomains
Access-Control-Allow-Origin: *
Vary: Accept-Encoding
Content-Length: 12561
Date: Sun, 28 Oct 2018 18:49:56 GMT
Connection: close
 uncompressed-len 0 net-response-time-onstart 605 net-response-time-onstop 606   1